<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="ra_report_foreign_company_template_action" model="ir.actions.report">
        <field name="name">Referral Agreement Foreign</field>
        <field name="model">purchase.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">pao_sign_ra.ra_report_foreign_company_template</field>
        <field name="report_file">pao_sign_ra.ra_report_foreign_company_template</field>
        <field name="print_report_name">'RA - %s - %s' % (object.name,object.partner_id.name)</field>
        <field name="binding_model_id" ref="model_purchase_order"/>
        <field name="binding_type">report</field>
    </record>

    <template id="ra_report_foreign_company_template">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <t t-foreach="docs" t-as="doc">
                    <style>
                        @font-face{
                            font-family: 'Times New Roman';
                            font-style: normal;
                            src:url('/servicereferralagreement/static/src/fonts/times-new-roman-14.ttf') format('truetype');
                        }
                    </style>
                    <div class="header">
                        <div class="row mb8">
                            <div class="col-6 mt-5">
                                <img src="pao_sign_ra/static/src/img/logo.png" style="width:230px; height:auto;" alt="Primus Logo"/>
                            </div>
                        </div>
                    </div>
                    <div class="mt-0 pt-0" style="text-align: justify; font-family: 'Times New Roman', Times, serif !important; font-size: 16px;">
                        <div class="text-center w-100 mb-5">
                            <strong>
                            <span style="font-size: 22px !important; display: inline-block;">PRIMUS AUDITING OPERATIONS</span>
                            <br/>
                            <span style="font-size: 22px !important; display: inline-block;">INDEPENDENT AUDITOR REFERRAL AGREEMENT</span>
                            </strong>
                        </div>
    
                        <!-- Fetch data from the first line of purchase.order.line for these fields -->
                        <t t-if="doc.order_line">
                            <t t-set="first_line" t-value="doc.order_line[0]"/>
    
                            <p>
                                <strong>JS Audit Group, Inc., as Primus Auditing Operations ("Primus")</strong> hereby agrees to engage
                                <span t-esc="doc.partner_id.name"/> ("Auditor") to perform audit services as specified below with the
                                full details shown on the audit appointment document:
                            </p>
    
                            <p>
                                <strong>Organization Name ("Customer"):</strong>
                                <span t-field="first_line.organization_id.name"/>
                            </p>
                            <p>
                                <strong>Billing Customer:</strong>
                                <span t-if="first_line.sra_customer_id" t-field="first_line.sra_customer_id"/>
                                <span t-else=""> - </span>
                            </p>
                            <div class="d-flex">
                                <p class="w-50">
                                    <strong>Billed In:</strong>
                                    <span t-field="doc.company_id.country_id.name"/>
                                </p>
                                <p class="w-50">
                                    <strong>Registration Number:</strong>
                                    <span t-field="first_line.registrynumber_id"/>
                                </p>
                            </div>
                            <div class="d-flex">
                                <p class="w-50">
                                    <strong>Contract E-mail:</strong>
                                    <span class="text-lowercase" t-field="first_line.registrynumber_id.contract_email"/>
                                </p>
                                <p class="w-50">
                                    <strong>Phone #:</strong>
                                    <span t-if="first_line.registrynumber_id.phone" t-field="first_line.registrynumber_id.phone"/>
                                    <span t-else=""> - </span>
                                </p>
                            </div>
                            <div class="d-flex">
                                <p class="w-50">
                                    <strong>Invoice E-mail:</strong>
                                    <span  t-if="first_line.sra_customer_id" class="text-lowercase" t-field="first_line.sra_customer_id.email"/>
                                    <span t-else=""> - </span>
                                </p>
                                <p class="w-50">
                                    <strong>Agreed Date:</strong>
                                    <span t-field="first_line.service_start_date"/>
                                </p>
                            </div>
    
                        </t>
    
                        <table class="table w-100 text-start" style="border-collapse: collapse;">
                            <thead style="background: black; color: white;">
                                <tr>
                                    <th class="text-center">Services</th>
                                    <th class="text-center">Quantity</th>
                                    <th class="text-center">Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="doc.order_line" t-as="line">
                                    <tr>
                                        <td>
                                            <span t-esc="line.product_id.name"/>
                                        </td>
                                        <td>
                                            <span t-esc="line.product_qty"/>
                                        </td>
                                        <td>
                                            <span t-field="line.price_subtotal"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        
                        <div class="d-flex">
                            <p class="w-50"/>
                            <p class="w-50 text-end">
                                Total Services: <span t-field="doc.amount_total"/>
                            </p>
                        </div>
    
                        <!-- Section 1: Expenses -->
                        <p>
                            <strong>1. EXPENSES. </strong>Primus will reimburse Auditor for expenses per its established expense policy (unless specific arrangements are made to meet Costco pricing limitations)
                            , which the auditor acknowledges receiving. <span class="text-decoration-underline fw-bold fst-italic">Proof of receipts must be provided to Primus for reimbursement.</span> 
                            Auditor hereby agrees to check with Primus’ coordinator for special instructions.
                        </p>
    
                        <!-- Section 2: Delivery of Audit Results -->
                        <p>
                            <strong>2. DELIVERY OF AUDIT RESULTS.</strong> Auditor hereby agrees to the following penalty clause:
                        </p>
                        <p>
                            Primus is contractually bound to deliver audit information to its clients as early as three days from date of performance. 
                            <span class="text-decoration-underline fw-bold fst-italic">Therefore, audit results must be submitted to Primus by the end of 
                            the seventh full business day after audit performance.</span> In the event that audit report is not submitted as per the last 
                            sentence the penalty shall be assessed against the Audit Fee at the rate of 10% of the gross Primus-auditee contract rate; 
                            this charge to be repeated each day thereafter until the report is submitted (this excludes report rejected by the audit QA System)
                        </p>
                        <p class="fst-italic">
                            For example, this would mean that a contract providing for a $1,000 fee payable to Primus would bear a penalty of $100 per day as a 
                            reduction of the fee payable to the auditor.  In addition to the fee reduction, Primus will very closely assess the future use of the 
                            auditor due to late delivery.
                        </p>
    
                        <!-- Section 3: Data Ownership -->
                        <p>
                            <strong>3. DATA OWNERSHIP. </strong><span class="fst-italic">All data submitted to the Primus system becomes the property of 
                            Primus Auditing Operations for statistical comparisons, reports, and other materials.</span>
                        </p>
    
                        <!-- Section 4: Limitation of Liability -->
                        <p>
                            <strong>4. LIMITATION OF LIABILITY AND INDEMNITY. </strong>Client hereby releases JS Audit Group, Inc. and its affiliates 
                            from any loss or liability suffered by Auditor due to Primus’ use of incorrect information provided by Auditor pursuant 
                            to this Agreement, other than incorrect information developed and posted solely by Primus.  Auditor agrees to indemnify, 
                            defend and hold Primus free and harmless from any claims from third parties resulting from inaccurate or incorrect information 
                            provided or collected by Auditor and provided to Primus for use with its auditing program.
                        </p>
    
                        <!-- Section 5: Independent Contractor Status -->
                        <p>
                            <strong>5. INDEPENDENT CONTRACTOR STATUS. </strong>Auditor further acknowledges he / she is acting in the role of independent 
                            contractor in providing services to Primus clients. Auditor warrants and represents that he / she has complied with all Federal, 
                            state and local laws regarding business permits and licenses that may be required for him / her to perform the work as set forth 
                            in this Agreement. Auditor shall supply, at his / her sole expense, all equipment, tools, materials and or supplies to accomplish 
                            the work to be performed. Neither Federal, nor state, nor local income tax shall be withheld or paid on behalf of the Auditor or 
                            his / her employees. Because Auditor is engaged in his / her own independent contracting business and is not an employee of Primus, 
                            Primus will not obtain insurance (professional liability, workers compensation, general liability, auto, etc.) for the Auditor or 
                            his / her employees. Auditor agrees to obtain his / her own insurance coverage and furnish a copy of the certificate of insurance 
                            naming Primus as an additional insured. Reference Cert-051 Insurance Requirements.
                        </p>
    
                        <!-- Section 6: Governing Law -->
                        <p>
                            <strong>6. GOVERNING LAW / VENUE. </strong>This Agreement shall be governed by and construed in accordance with the laws of the 
                            State of California. In the event that it is necessary to institute any action to enforce any right granted herein or to redress any 
                            alleged breach hereof, then the exclusive venue for such action shall reside with the applicable Superior or Municipal Court located 
                            in Santa Maria, California.
                        </p>
                        
                        <p>
                            <strong>7. </strong>Primus will bill and send audit report to client. Auditor will bill Primus for their services per this agreement.
                        </p>
                        
                        <p>Independent Auditor</p>
                        <div class="d-flex text-center">
                            <div>
                                <div class="mb-2" style="border-bottom: 1px solid black; height:70px; width:327px; background-color: transparent;">
                                    <img style="width:327px; heigth:auto" t-if="doc.sra_audit_signature" t-att-src="image_data_uri(doc.sra_audit_signature)"/>
                                </div>
                                Auditor                                    
                            </div>
                            <div class="ms-5" style="height: 70px; background-color: transparent; margin-top: 53px;">
                                <div class="mb-2 px-3" style="border-bottom: 1px solid black;">
                                    <span t.if="doc.sra_audit_signature_date" t-field="doc.sra_audit_signature_date"/>
                                </div>
                                Date Signed                          
                            </div>
                        </div>
                        
                        <div>
                            <p>Primus Auditing Operations</p>
                            <p>By:</p>
                            <div class="d-flex text-center">
                                <div>
                                    <div class="mb-2" style="border-bottom: 1px solid black; height:70px; width:327px; background-color: transparent;">
                                        <img style="width:250px; auto" t-if="doc.coordinator_id.employee_ids[0]" t-att-src="image_data_uri(doc.coordinator_id.employee_ids[0].es_sign_signature)"/>
                                    </div>
                                    Audit Coordinator                                  
                                </div>
                                <div class="ms-5" style="height: 70px; background-color: transparent; margin-top: 53px;">
                                    <div class="mb-2 px-3" style="border-bottom: 1px solid black;" t-field="doc.today"/>
                                    Date Signed                          
                                </div>
                            </div>
                        </div>
    
                    </div>
                    <div class="footer o_boxed_footer pt-3">
                        <div class="text-center" style="font-family: 'Times New Roman', Times, serif !important;">
                            <ul class="list-inline text-nowrap w-100">
                                <li class="list-inline-item w-25">Primus Auditing Ops Document</li>
                                <li class="list-inline-item w-25">Cert-T001</li>
                                <li class="list-inline-item w-25">Rev. 4</li>
                                <li class="list-inline-item w-25">10/02/2023</li>
                            </ul>
                            <!--<div t-if="report_type == 'pdf'">-->
                            <!--    Page: <span class="page"/> / <span class="topage"/>-->
                            <!--</div>-->
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>